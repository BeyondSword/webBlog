{% extends "base.html" %}
{% import "includes/_macros.html" as macros %}
{% block title %}Blog entries{% endblock %}
{% block content_title %}{% if search %}Search "{{ search }}"{% else %}Blog entries{% endif %}{% endblock %}

{% block content %}
  <h2>Hello, 
    {% if current_user.is_authenticated %}
    {{ current_user.username }}
    {% else %}
    Stranger
    {% endif %}
    !
  </h2>  
  {% for post in posts%}
    <h3>
      <a href="{% if post.published %}{{ url_for('main.detail', slug=post.slug)
          }}{% else %}{{ url_for('main.edit', slug=post.slug) }}{% endif %}">
        {{ post.title }}
      </a>
    </h3>
    <p>Created at {{ post.timestamp.strftime('%Y/%m/%d   %X') }}</p>
  {% else %}
    <p>No entries have been created yet.</p>
  {% endfor %}
 
  <div class="pagination">
    {{ macros.pagination_widget(pagination, '.index') }}
  </div>
  {% endblock %}
